(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69ff71fc"],{"1af6":function(t,e,a){var n=a("63b6");n(n.S,"Array",{isArray:a("9003")})},"20d6":function(t,e,a){"use strict";var n=a("5ca1"),r=a("0a49")(6),i="findIndex",s=!0;i in[]&&Array(1)[i](function(){s=!1}),n(n.P+n.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},"75fc":function(t,e,a){"use strict";var n=a("a745"),r=a.n(n);function i(t){if(r()(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var s=a("774e"),c=a.n(s),o=a("c8bb"),u=a.n(o);function l(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return c()(t)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(t){return i(t)||l(t)||d()}a.d(e,"a",function(){return f})},"774e":function(t,e,a){t.exports=a("d2d5")},"7e56":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("我的实验")]),a("a-spin",{attrs:{size:"large",spinning:t.isLoading}},[a("a-icon",{attrs:{slot:"indicator",type:"loading-3-quarters",spin:!0},slot:"indicator"}),a("a-table",{attrs:{columns:t.columns,dataSource:t.data,rowKey:"name"},scopedSlots:t._u([{key:"status",fn:function(e){var n=e.status;return a("span",{},[a("a-badge",{attrs:{status:t._f("statusFilter")(n)}}),t._v("\n        "+t._s(t._f("statusFilter2")(n))+"\n      ")],1)}},{key:"action",fn:function(e){return a("span",{},[a("a",{attrs:{href:e.url,target:"_blank",disabled:!e.url}},[a("a-icon",{attrs:{type:"eye"}}),t._v(" 浏览\n        ")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:e.url,download:e.disposition,disabled:!e.url}},[a("a-icon",{attrs:{type:"download"}}),t._v(" 下载\n        ")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{disabled:"saved"!==e.status},on:{click:function(a){return t.handelSubmitClick(e)}}},[a("a-icon",{attrs:{type:"upload"}}),t._v(" 提交\n        ")],1)],1)}}])})],1),a("a-modal",{attrs:{title:"朋友，确定提交么？",confirmLoading:t.isSubmitting},on:{ok:t.submitLabReport},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("p",[a("span",{staticStyle:{color:"coral"}},[t._v("\n        重要：请确保"+t._s(t.clickedRecord.name)+"实验的所有步骤的回答都已经保存。\n      ")]),a("a-popover",[a("template",{slot:"content"},[t._v('\n          在实验界面点击"保存本页"按钮即可保存该步骤的回答。\n        ')]),a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"question-circle"}})],2)],1),a("p",[t._v("\n      注意：提交实验报告后老师便可以看到并批改，同时你将"),a("span",{staticStyle:{color:"coral"}},[t._v("无法更改")]),t._v("你的回答。\n    ")]),a("p",[t._v("\n      建议在正式提交之前预览一下实验报告 😁。"),a("a",{attrs:{href:t.clickedRecord.url,target:"_blank"}},[t._v("[ 点我预览 ]")])]),a("p",[t._v("确定提交报告么？")])])],1)},r=[],i=(a("7f7f"),a("20d6"),a("75fc")),s=(a("28a5"),a("a481"),a("7514"),a("ac6a"),a("96cf"),a("3b8d")),c=a("bc3a"),o=a.n(c),u=[{title:"实验名称",dataIndex:"name"},{title:"实验状态",key:"status",scopedSlots:{customRender:"status"}},{title:"评分",dataIndex:"score"},{title:"评语",dataIndex:"comment",width:"300px"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],l=[{name:"安全管理（RACF）",labId:"RACF",status:"",score:"",comment:""},{name:"存储管理（SMS）",labId:"SMS",status:"",score:"",comment:""},{name:"目录管理（Catalog）",labId:"CATALOG",status:"",score:"",comment:""},{name:"系统命令（MVS）",labId:"MVS",status:"",score:"",comment:""},{name:"脚本语言（REXX）",labId:"REXX",status:"",score:"",comment:""}],d={data:function(){return{columns:u,data:l,allRates:[],visible:!1,clickedRecord:{},isLoading:!0,isSubmitting:!1}},created:function(){this.init()},methods:{init:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.$http.get("/api/db/getLabStatus");case 3:return e=t.sent,this.data.forEach(function(t,a,n){n[a].status=e.body.find(function(e){return e.lab===t.labId}).status}),t.next=7,this.$http.get("/api/db/checkScore");case 7:this.allRates=t.sent,this.data.forEach(function(t){a.$http.get("/api/db/getReports",{params:{lab:t.labId},responseType:"arraybuffer"}).then(function(e){if(e.data.byteLength){t.disposition=e.headers.map["content-disposition"][0].split("=")[1].replace(/"/g,"");var n=[];if(n.push(e.body),t.url=window.URL.createObjectURL(new Blob(n,{type:"application/pdf"})),a.data=Object(i["a"])(a.data),a.allRates&&200===+a.allRates.status){var r=a.allRates.body.findIndex(function(e){return e.lab.toUpperCase()===t.labId.toUpperCase()});-1!==r&&(t.comment=a.allRates.body[r].comment,t.score=a.allRates.body[r].score,t.status="scored")}}})}),this.isLoading=!1;case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handelSubmitClick:function(t){this.visible=!0,this.clickedRecord=t},submitLabReport:function(){var t=this;this.isSubmitting=!0,o.a.post("/api/db/submitLab",{lab:this.clickedRecord.labId}).then(function(){t.$message.success("✨成功提交".concat(t.clickedRecord.name,"实验报告，等待老师批阅")).then()}).catch(function(e){t.$message.error("提交失败："+e.message).then()}).finally(function(){t.isSubmitting=!1,t.visible=!1,t.init()})}},filters:{statusFilter:function(t){switch(t){case"unsaved":return"default";case"saved":return"warning";case"submitted":return"processing";case"scored":return"success"}},statusFilter2:function(t){switch(t){case"unsaved":return"未保存";case"saved":return"已保存";case"submitted":return"已提交";case"scored":return"已批改";default:return"获取中..."}}}},f=d,p=a("2877"),b=Object(p["a"])(f,n,r,!1,null,null,null);e["default"]=b.exports},a481:function(t,e,a){"use strict";var n=a("cb7c"),r=a("4bf8"),i=a("9def"),s=a("4588"),c=a("0390"),o=a("5f1b"),u=Math.max,l=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,b=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,function(t,e,a,v){return[function(n,r){var i=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,i,r):a.call(String(i),n,r)},function(t,e){var r=v(a,t,this,e);if(r.done)return r.value;var d=n(t),f=String(this),p="function"===typeof e;p||(e=String(e));var m=d.global;if(m){var g=d.unicode;d.lastIndex=0}var y=[];while(1){var S=o(d,f);if(null===S)break;if(y.push(S),!m)break;var R=String(S[0]);""===R&&(d.lastIndex=c(f,i(d.lastIndex),g))}for(var k="",w=0,_=0;_<y.length;_++){S=y[_];for(var x=String(S[0]),I=u(l(s(S.index),f.length),0),A=[],L=1;L<S.length;L++)A.push(b(S[L]));var $=S.groups;if(p){var C=[x].concat(A,I,f);void 0!==$&&C.push($);var j=String(e.apply(void 0,C))}else j=h(x,f,I,A,$,e);I>=w&&(k+=f.slice(w,I)+j,w=I+x.length)}return k+f.slice(w)}];function h(t,e,n,i,s,c){var o=n+t.length,u=i.length,l=p;return void 0!==s&&(s=r(s),l=f),a.call(c,l,function(a,r){var c;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(o);case"<":c=s[r.slice(1,-1)];break;default:var l=+r;if(0===l)return a;if(l>u){var f=d(l/10);return 0===f?a:f<=u?void 0===i[f-1]?r.charAt(1):i[f-1]+r.charAt(1):a}c=i[l-1]}return void 0===c?"":c})}})},a745:function(t,e,a){t.exports=a("f410")},c8bb:function(t,e,a){t.exports=a("54a1")},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-69ff71fc.fb02c7f8.js.map